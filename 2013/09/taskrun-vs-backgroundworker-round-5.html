<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Task.Run vs BackgroundWorker, Round 5: Reporting Progress</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="~ Ready? ~" />
    <link rel="canonical" href="http://blog.stephencleary.com/2013/09/taskrun-vs-backgroundworker-round-5.html" />
    
    <link rel="alternate" type="application/rss+xml" title="Stephen Cleary (the blog)" href="http://feeds.feedburner.com/NitoPrograms" />
    
    <link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/bootswatch/3.2.0/spacelab/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" />
    <link type="text/css" rel="stylesheet" href="http://stephencleary.com/css/main.css" />
    <meta name="application-name" content="Stephen Cleary" />
    <link rel="apple-touch-icon" sizes="57x57" href="http://stephencleary.com/icons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="http://stephencleary.com/icons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="http://stephencleary.com/icons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="http://stephencleary.com/icons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="http://stephencleary.com/icons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="http://stephencleary.com/icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="http://stephencleary.com/icons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="http://stephencleary.com/icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" href="http://stephencleary.com/icons/apple-touch-icon.png"/>
    <link rel="apple-touch-icon-precomposed" href="http://stephencleary.com/icons/apple-touch-icon-precomposed.png"/>
    <link rel="icon" type="image/png" href="http://stephencleary.com/icons/favicon-196x196.png" sizes="196x196">
    <link rel="icon" type="image/png" href="http://stephencleary.com/icons/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="http://stephencleary.com/icons/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="http://stephencleary.com/icons/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="http://stephencleary.com/icons/favicon-32x32.png" sizes="32x32">
    
</head>
<body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <div class="navbar-brand-container"><a class="navbar-brand" href="http://stephencleary.com">Stephen Cleary</a></div>
    </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
            <li  class="active"  ><a href="http://blog.stephencleary.com">Blog</a></li>
            <li  ><a href="http://stephencleary.com/projects/">Projects</a></li>
            <li  ><a href="http://stephencleary.com/publications/">Publications</a></li>
            <li  ><a href="http://stephencleary.com/contact/">Contact</a></li>
            <li><a href="http://feeds.feedburner.com/NitoPrograms"><i class="fa fa-rss-square fa-lg"></i></a></li>
            <li  ><a href="http://stephencleary.com/search/"><i class="fa fa-search"></i></a></li>
        </ul>
    </div>
</nav>

    <div class="container-fluid">
        <div class="col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3">
            <div class="post">

  <header>
      <div class="page-header">
          <h1>Task.Run vs BackgroundWorker, Round 5: Reporting Progress</h1>
          <small><time datetime="2013-09-19">Sep 19, 2013</time> &bull; <a data-disqus-identifier="/2013/09/taskrun-vs-backgroundworker-round-5" href="#disqus_thread">Comments</a></small>
      </div>
  </header>

  <article>
  <h2 id="ready-">~ Ready? ~</h2>

<p>When you have a lengthly background operation, it’s considered polite to give some kind of progress notification to the user (if possible). This usually takes the form of a percentage, with some optional extra information (e.g., the name of the current file being processed).</p>

<p>We’ll take the same operation as last time (sleep for 100ms 100 times, for a total of 10 seconds), and this time we’ll report progress at each iteration. Since we’ll be updating the UI with our progress information, we want each progress update to be raised in the UI context.</p>

<h2 id="fight-">~ Fight! ~</h2>

<h3 id="backgroundworker">BackgroundWorker</h3>

<p><code>BackgroundWorker</code> has built-in support for progress reporting, and even automatically marshals to the UI thread. Like last time, we have to first set the <code>BackgroundWorker.WorkerSupportsProgress</code> property to allow progress reports. Then, the <code>DoWork</code> method can call the <code>BackgroundWorker.ReportProgress</code> method, which raises the <code>BackgroundWorker.ProgressChanged</code> event.</p>

<div class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">private</span> <span class="k">void</span> <span class="nf">button1_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">bgw</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BackgroundWorker</span><span class="p">();</span>
    <span class="n">bgw</span><span class="p">.</span><span class="n">WorkerReportsProgress</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="n">bgw</span><span class="p">.</span><span class="n">DoWork</span> <span class="p">+=</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">!=</span> <span class="m">100</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">bgw</span><span class="p">.</span><span class="n">ReportProgress</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
            <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">100</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="n">bgw</span><span class="p">.</span><span class="n">ProgressChanged</span> <span class="p">+=</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="n">label1</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="n">args</span><span class="p">.</span><span class="n">ProgressPercentage</span><span class="p">.</span><span class="n">ToString</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="n">bgw</span><span class="p">.</span><span class="n">RunWorkerCompleted</span> <span class="p">+=</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="n">label1</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="s">&quot;Completed.&quot;</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="n">bgw</span><span class="p">.</span><span class="n">RunWorkerAsync</span><span class="p">();</span>
<span class="p">}</span></code></pre></div>

<p>Just like last time, this approach works but is rather convoluted. Again, we see the <code>BackgroundWorker</code> type having too many responsibilities: it has the enabling property, the method to report progress, and the event that is raised when the progress changes.</p>

<h3 id="taskrun">Task.Run</h3>

<p>The new <code>async</code> support also introduces a pattern for progress reporting in asynchronous methods: the caller optionally creates an implementation of <code>IProgress&lt;T&gt;</code> (usually an instance of <code>Progress&lt;T&gt;</code>), and that instance is passed into the asynchronous method. The method then sends progress reports to its <code>IProgress&lt;T&gt;</code> instance (if it is not <code>null</code>).</p>

<div class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">private</span> <span class="k">async</span> <span class="k">void</span> <span class="nf">button2_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">progressHandler</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Progress</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="k">value</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="n">label2</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="k">value</span><span class="p">.</span><span class="n">ToString</span><span class="p">();</span>
    <span class="p">});</span>
    <span class="kt">var</span> <span class="n">progress</span> <span class="p">=</span> <span class="n">progressHandler</span> <span class="k">as</span> <span class="n">IProgress</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;;</span>
    <span class="k">await</span> <span class="n">Task</span><span class="p">.</span><span class="n">Run</span><span class="p">(()</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">!=</span> <span class="m">100</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">progress</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
                <span class="n">progress</span><span class="p">.</span><span class="n">Report</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
            <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">100</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="n">label2</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="s">&quot;Completed.&quot;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>What we end up here is also somewhat convoluted. Normally, the <code>IProgress&lt;T&gt;</code> is a method parameter, but for these examples I’m trying to keep everything in the same method. Also, in this example there’s no need to check <code>progress != null</code>, but that is standard practice for asynchronous code so I’m including it here.</p>

<p>OK, so the <code>Task.Run</code> code is not a <em>lot</em> better than <code>BackgroundWorker</code>. It is better, though; it’s a bit shorter, and the types definitely have better separation of concerns. So far, I’d way it’s winning by technicalities instead of by a knockout.</p>

<p>Let’s take the stakes a bit higher. Let’s say we want to report strings instead of an integer percentage. Furthermore, let’s pretend we’re doing an operation where the percent complete is difficult to compute, so instead we’ll report strings that describe the current stage of the operation.</p>

<h2 id="fight--1">~ Fight! ~</h2>

<h3 id="backgroundworker-1">BackgroundWorker</h3>

<p><code>BackgroundWorker.ReportProgress</code> takes an optional second argument, which is a custom “progress report” instance. This is then available to the progress changed handler as <code>ProgressChangedEventArgs.UserState</code>.</p>

<div class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">private</span> <span class="k">void</span> <span class="nf">button1_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">bgw</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BackgroundWorker</span><span class="p">();</span>
    <span class="n">bgw</span><span class="p">.</span><span class="n">WorkerReportsProgress</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="n">bgw</span><span class="p">.</span><span class="n">DoWork</span> <span class="p">+=</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">!=</span> <span class="m">100</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">bgw</span><span class="p">.</span><span class="n">ReportProgress</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="s">&quot;Stage &quot;</span> <span class="p">+</span> <span class="n">i</span><span class="p">);</span>
            <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">100</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="n">bgw</span><span class="p">.</span><span class="n">ProgressChanged</span> <span class="p">+=</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="n">label1</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="p">(</span><span class="kt">string</span><span class="p">)</span><span class="n">args</span><span class="p">.</span><span class="n">UserState</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="n">bgw</span><span class="p">.</span><span class="n">RunWorkerCompleted</span> <span class="p">+=</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="n">label1</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="s">&quot;Completed.&quot;</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="n">bgw</span><span class="p">.</span><span class="n">RunWorkerAsync</span><span class="p">();</span>
<span class="p">}</span></code></pre></div>

<p>There are a couple of drawbacks to the way <code>BackgroundWorker</code> reports custom progress types. The first is that it is untyped (we just get an <code>object</code> instance, which we cast to <code>string</code>). The second is that we <em>must</em> pass back a “percent complete”, even if there is no way to calculate a meaningful value for that parameter. You can, of course, just pass zero and document that the caller should ignore that value.</p>

<h3 id="taskrun-1">Task.Run</h3>

<p>The <code>IProgress&lt;T&gt;</code> and <code>Progress&lt;T&gt;</code> types allow any type for <code>T</code>, so changing the progress report type from <code>int</code> to <code>string</code> is quite straightforward:</p>

<div class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">private</span> <span class="k">async</span> <span class="k">void</span> <span class="nf">button2_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">progressHandler</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Progress</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="k">value</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="n">label2</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="kt">var</span> <span class="n">progress</span> <span class="p">=</span> <span class="n">progressHandler</span> <span class="k">as</span> <span class="n">IProgress</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;;</span>
    <span class="k">await</span> <span class="n">Task</span><span class="p">.</span><span class="n">Run</span><span class="p">(()</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">!=</span> <span class="m">100</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">progress</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
                <span class="n">progress</span><span class="p">.</span><span class="n">Report</span><span class="p">(</span><span class="s">&quot;Stage &quot;</span> <span class="p">+</span> <span class="n">i</span><span class="p">);</span>
            <span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">100</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="n">label2</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="s">&quot;Completed.&quot;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<h3 id="discussion">Discussion</h3>

<p>I must conclude again that this round goes to <code>Task.Run</code>. The <code>IProgress&lt;T&gt;</code> and <code>Progress&lt;T&gt;</code> types are strongly typed, have better separation of concerns, and they easily allow any type of custom progress report.</p>


  </article>
    
    <footer>
        
            <ul class="pager">
                <li class="previous"><a href="/2013/09/taskrun-vs-backgroundworker-round-4.html" title="Task.Run vs BackgroundWorker, Round 4: Cancellation">&larr; Previous in Task.Run vs. BackgroundWorker</a></li>
                <li class="next"><a href="/2013/09/taskrun-vs-backgroundworker-conclusion.html" title="Task.Run vs BackgroundWorker: Conclusion">Next in Task.Run vs. BackgroundWorker &rarr;</a></li>
            </ul>
        
        
        <ul class="pager">
            <li class="previous"><a href="/2013/09/taskrun-vs-backgroundworker-round-4.html" title="Task.Run vs BackgroundWorker, Round 4: Cancellation">&larr; Previous Post</a></li>
            <li class="next"><a href="/2013/09/taskrun-vs-backgroundworker-conclusion.html" title="Task.Run vs BackgroundWorker: Conclusion">Next Post &rarr;</a></li>
        </ul>

        <div id="disqus_thread"></div>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </footer>
</div>
        </div>
        <div class="col-sm-2 col-md-3 col-md-offset-0 col-lg-2 col-lg-offset-1 affix" data-spy="affix" role="navigation">
            
                <div class="panel panel-primary">
                    <div class="panel-heading">Task.Run vs. BackgroundWorker</div>
                    <div class="panel-body sidenav">
                        <ul class="nav nav-pills nav-stacked">
                                            <li class="sidenavitem"><a href="/2013/05/taskrun-vs-backgroundworker-intro.html">Intro</a></li>
                                            <li class="sidenavitem"><a href="/2013/05/taskrun-vs-backgroundworker-round-1.html">The Basic Pattern</a></li>
                                            <li class="sidenavitem"><a href="/2013/07/taskrun-vs-backgroundworker-round-2.html">Error Handling</a></li>
                                            <li class="sidenavitem"><a href="/2013/08/taskrun-vs-backgroundworker-round-3.html">Returning Results</a></li>
                                            <li class="sidenavitem"><a href="/2013/09/taskrun-vs-backgroundworker-round-4.html">Cancellation</a></li>
                                            <li class="active sidenavitem"><a href="/2013/09/taskrun-vs-backgroundworker-round-5.html">Reporting Progress</a></li>
                                            <li class="sidenavitem"><a href="/2013/09/taskrun-vs-backgroundworker-conclusion.html">Conclusion</a></li>
                        </ul>
                    </div>
                </div>
            
        </div>
        <div class="col-sm-2 sidebar">
            <div class="panel panel-default">
                <div class="panel-heading">About Stephen Cleary</div>
                <div class="panel-body">
                    <div class="center"><img src="http://stephencleary.com/www.assets/Me-large.jpg"/></div>
                    <div class="center vertical-margins">Stephen Cleary is a <a href="http://www.landmarkbaptist.ws/salvation">Christian</a>, <a href="http://picasaweb.google.com/stephenandmandy">husband, father,</a> and programmer living in Northern Michigan.</div>
                    <div class="center"><a href="http://mvp.microsoft.com/en-us/mvp/Stephen%20Cleary-5000058"><img class="mvp-logo" src="http://stephencleary.com/www.assets/MVP.png"/></a></div>
                </div>
            </div>
            <div class="panel panel-primary">
                <div class="panel-heading">My book</div>
                <div class="panel-body center">
                    <div><a href="http://tinyurl.com/ConcurrencyCookbook"><img src="http://stephencleary.com/www.assets/Book-small.jpg"/></a></div>
                    <div>Available from <a href="http://tinyurl.com/ConcurrencyCookbook">O'Reilly</a> or <a href="http://tinyurl.com/ConcurrencyCookbookAmazon">Amazon</a>.</div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Advertisement</div>
                <div class="panel-body">
                    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2749292939902134" data-ad-slot="7584809820" data-ad-format="auto"></ins>
                </div>
            </div>
            
            <div class="panel panel-primary">
                <div class="panel-heading">Popular Posts</div>
                <div class="panel-body">
                    <ul class="nav nav-pills nav-stacked">
                        <li><a href="/2012/02/async-and-await.html">Async/await Intro</a></li>
                        <li><a href="/2013/11/there-is-no-thread.html">There Is No Thread</a></li>
                        <li><a href="/2012/07/dont-block-on-async-code.html">Don't Block on Async Code</a></li>
                    </ul>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Series</div>
                <div class="panel-body">
                    <ul class="nav nav-pills nav-stacked">
                        <li><a href="/2014/04/a-tour-of-task-part-0-overview.html">A Tour of Task</a></li>
                        <li><a href="/2013/10/taskrun-etiquette-and-proper-usage.html">Task.Run Etiquette</a></li>
                        <li><a href="/2013/05/taskrun-vs-backgroundworker-intro.html">Task.Run vs. BackgroundWorker</a></li>
                        <li><a href="/2013/01/async-oop-0-introduction.html">Async OOP</a></li>
                        <li><a href="/2009/04/tcpip-net-sockets-faq.html">TCP/IP .NET Sockets FAQ</a></li>
                        <li><a href="/2013/10/managed-services-roundup.html">Managed Services</a></li>
                        <li><a href="/2009/08/how-to-implement-idisposable-and.html">IDisposable and Finalizers</a></li>
                        <li><a href="/2011/02/option-parsing-introduction.html">Option Parsing</a></li>
                    </ul>
                </div>
            </div>
            
        </div>
    </div>

    <div class="google">
        <gcse:searchresults></gcse:searchresults>
    </div>
    
    <!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
<script type="text/javascript">window.jQuery || document.write('<script src="/lib/jquery-2.1.1.min.js"><\/script>')</script>

<!-- Bootstrap -->
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script type="text/javascript">window.jQuery.fn.modal || document.write('<script src="/lib/bootstrap.min.js"><\/script>')</script>
<script type="text/javascript">
    (function($) {
        $(function() {
            if ($('body').css('color') !== 'rgb(102, 102, 102)') {
                $('head').prepend('<link rel="stylesheet" href="/lib/bootstrap.min.css" />');
            }
        });
    })(window.jQuery);
</script>

<!-- Font Awesome -->
<span id="facheck" class="fa" style="display:none"></span>
<script type="text/javascript">
    (function($) {
        $(function() {
            if ($('#facheck').css('fontFamily') !== 'FontAwesome') {
                $('head').prepend('<link rel="stylesheet" href="/lib/font-awesome.min.css" />');
            }
        });
    })(window.jQuery);
</script>

<!-- Scroll the sidebar into view (if necessary) -->

<script src="/lib/jquery.scrollTo.min.js"></script>
<script type="text/javascript">
    (function ($) {
        $(function () {
            var container = $('.affix').filter(function() { return $(this).css('position') == 'fixed'; });
            var target = container.find('.active');
            container.scrollTo(target, { offset: - (container.height() / 2 - target.height() / 2) });
        });
    })(window.jQuery);
</script>


<!-- Google analytics -->
<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-8910661-5', 'stephencleary.com');
    ga('send', 'pageview');
</script>







<!-- Disqus variables -->
<script type="text/javascript">
    var disqus_shortname = 'stephencleary';
    var disqus_identifier = "/2013/09/taskrun-vs-backgroundworker-round-5";
    var disqus_title = "Task.Run vs BackgroundWorker, Round 5: Reporting Progress";
    var disqus_url = "http://blog.stephencleary.com/2013/09/taskrun-vs-backgroundworker-round-5.html";
</script>

<!-- Disqus comment counter -->
<script type="text/javascript">
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
    }());
</script>

<!-- Disqus comment section -->
<script type="text/javascript">
    (function() {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>



<!-- Google AdSense -->
<script src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Moment -->
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.6.0/moment.min.js"></script>
<script type="text/javascript">window.moment || document.write('<script src="/lib/moment.min.js"><\/script>')</script>
<script type="text/javascript">
    (function($) {
        $(function() {
            $('time').each(function (_, e) {
                var text = moment($(e).attr('datetime'), 'YYYY-MM-DD').fromNow();
                $(e).text(function(_, oldText) { return text + ' (' + oldText + ')'; });
            });
        });
    })(window.jQuery);
</script>

</body>
</html>